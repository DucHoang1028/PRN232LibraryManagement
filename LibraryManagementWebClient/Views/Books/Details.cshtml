@model Book
@{
    ViewData["Title"] = "Book Details";
}

<div class="row mb-4">
    <div class="col-12">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a asp-action="Index">Books</a></li>
                <li class="breadcrumb-item active" aria-current="page">@Model.Title</li>
            </ol>
        </nav>
    </div>
</div>

<div class="row">
    <div class="col-lg-8">
        <div class="card shadow">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0">
                    <i class="bi bi-book"></i> Book Details
                </h4>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <dl class="row">
                            <dt class="col-sm-4">Title:</dt>
                            <dd class="col-sm-8">@Model.Title</dd>

                            <dt class="col-sm-4">ISBN:</dt>
                            <dd class="col-sm-8">@Model.Isbn</dd>

                            <dt class="col-sm-4">Publisher:</dt>
                            <dd class="col-sm-8">@(Model.Publisher?.Name ?? "Unknown")</dd>

                            <dt class="col-sm-4">Language:</dt>
                            <dd class="col-sm-8">@Model.Language</dd>

                            <dt class="col-sm-4">Publication Date:</dt>
                            <dd class="col-sm-8">@Model.PublicationDate.ToString("MMMM dd, yyyy")</dd>
                        </dl>
                    </div>
                    <div class="col-md-6">
                        <dl class="row">
                            <dt class="col-sm-4">Total Copies:</dt>
                            <dd class="col-sm-8">@Model.TotalCopies</dd>

                            <dt class="col-sm-4">Available Copies:</dt>
                            <dd class="col-sm-8">
                                <span class="badge @(Model.AvailableCopies > 0 ? "bg-success" : "bg-danger")">
                                    @Model.AvailableCopies
                                </span>
                            </dd>

                            <dt class="col-sm-4">Rack Number:</dt>
                            <dd class="col-sm-8">@Model.RackNumber</dd>

                            <dt class="col-sm-4">Barcode:</dt>
                            <dd class="col-sm-8">@Model.Barcode</dd>

                            <dt class="col-sm-4">Status:</dt>
                            <dd class="col-sm-8">
                                <span class="badge @(Model.IsActive ? "bg-success" : "bg-secondary")">
                                    @(Model.IsActive ? "Active" : "Inactive")
                                </span>
                            </dd>
                        </dl>
                    </div>
                </div>

                @if (!string.IsNullOrEmpty(Model.Description))
                {
                    <div class="mt-3">
                        <h6>Description:</h6>
                        <p class="text-muted">@Model.Description</p>
                    </div>
                }

                <div class="mt-3">
                    <h6>System Information:</h6>
                    <small class="text-muted">
                        Created: @Model.CreatedDate.ToString("MMM dd, yyyy HH:mm") |
                        @if (Model.UpdatedDate.HasValue)
                        {
                            <span>Updated: @Model.UpdatedDate.Value.ToString("MMM dd, yyyy HH:mm")</span>
                        }
                    </small>
                </div>
            </div>
        </div>
    </div>

    <div class="col-lg-4">
        <div class="card shadow mb-3">
            <div class="card-header">
                <h6 class="mb-0">
                    <i class="bi bi-gear"></i> Actions
                </h6>
            </div>
            <div class="card-body">
                <div class="d-grid gap-2">
                    <a asp-action="Edit" asp-route-id="@Model.BookId" class="btn btn-warning">
                        <i class="bi bi-pencil"></i> Edit Book
                    </a>
                    <a asp-action="Delete" asp-route-id="@Model.BookId" class="btn btn-danger">
                        <i class="bi bi-trash"></i> Delete Book
                    </a>
                    <a asp-action="Index" class="btn btn-secondary">
                        <i class="bi bi-arrow-left"></i> Back to List
                    </a>
                </div>
            </div>
        </div>

        @if (Model.Loans.Any())
        {
            <div class="card shadow">
                <div class="card-header">
                    <h6 class="mb-0">
                        <i class="bi bi-arrow-left-right"></i> Recent Loans (@Model.Loans.Count)
                    </h6>
                </div>
                <div class="card-body">
                    <div class="list-group list-group-flush">
                        @foreach (var loan in Model.Loans.Take(5))
                        {
                            <div class="list-group-item d-flex justify-content-between align-items-center">
                                <div>
                                    <small class="text-muted">@loan.Member?.FirstName @loan.Member?.LastName</small><br>
                                    <small>@loan.CheckoutDate.ToString("MMM dd, yyyy")</small>
                                </div>
                                <span class="badge @(loan.Status == "Active" ? "bg-success" : "bg-secondary")">
                                    @loan.Status
                                </span>
                            </div>
                        }
                    </div>
                </div>
            </div>
        }
    </div>
</div> 